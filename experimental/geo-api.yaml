# EOAP Schemas (c) 2024-2025
#
# EOAP Schemas is licensed under
# Creative Commons Attribution-ShareAlike 4.0 International.
#
# You should have received a copy of the license along with this work.
# If not, see <https://creativecommons.org/licenses/by-sa/4.0/>.

# commons shared

- $import: https://raw.githubusercontent.com/eoap/schemas/main/string_format.yaml
- $import: https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml

- type: record
  name: KeyValuePair
  fields:
  - type: string
    name: key
  - type: string
    name: value

- type: record
  name: APIEndpoint
  fields:
  - type: https://raw.githubusercontent.com/eoap/schemas/main/string_format.yaml#URI
    name: url
  # add headers as list of key-value pairs
  - type:
    - 'null'
    - type: array
      items: KeyValuePair
    name: headers

# STAC

- type: record
  name: DatetimeInterval
  fields:
  - type: string
    name: start
  - type: string
    name: end

- type: record
  name: Fields
  fields:
  - type:
    - 'null'
    - type: array
      items: string
    name: include
  - type:
    - 'null'
    - type: array
      items: string
    name: exclude

- type: enum
  name: FilterLang
  symbols:
  - cql-text
  - cql-json

- type: enum
  name: Direction
  symbols:
  - asc
  - desc

- type: record
  name: SortBy
  fields:
  - type: string
    name: field
  - type: Direction
    name: direction

- type: record
  name: STACSearchSettings
  fields:
  - type:
    - 'null'
    - type: array
      items: double
    name: bbox
  - type:
    - 'null'
    - DatetimeInterval
    name: datetime
  - type:
    - 'null'
    - https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml#Point
    - https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml#MultiPoint
    - https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml#LineString
    - https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml#MultiLineString
    - https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml#Polygon
    - https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml#MultiPolygon
    - https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml#GeometryCollection
    name: intersects
  - type:
    - 'null'
    - type: array
      items: string
    name: collections
  - type:
    - 'null'
    - type: array
      items: string
    name: ids
  - type:
    - 'null'
    - int
    name: limit
  - type:
    - 'null'
    - Fields
    name: fields
  - type:
    - 'null'
    - Any
    name: filter
  - type:
    - 'null'
    - FilterLang
    name: filter-lang
  - type:
    - 'null'
    - type: array
      items: https://raw.githubusercontent.com/eoap/schemas/main/string_format.yaml#URI
    name: filter-crs
  - type:
    - 'null'
    - type: array
      items: SortBy
    name: sortby

- type: record
  name: STACAPI
  fields:
  - type: APIEndpoint
    name: api_endpoint
  - type: STACSearchSettings
    name: search_request

# OGC

- type: enum
  name: Bands
  symbols:
  - crs_coastal_aerosol
  - blue
  - green
  - red
  - nir08
  - swir1
  - swir2
  - panchromatic
  - cirrus
  - tirs1
  - tirs2

- type: record
  name: OGCExecuteProcessSettings
  fields:
  - type: string
    name: process_id
  - type: Any
    name: inputs
  - type:
    - 'null'
    - type: array
      items: Any
    name: properties

- type: record
  name: OCGProcesses
  fields:
  - type: APIEndpoint
    name: api_endpoint
  - type: OGCExecuteProcessSettings
    name: execute_request
